{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { CartContex } from \"../../contex/CartContex\";\nimport { getFirestore, collection, getDoc, addDoc } from \"firebase/firestore\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Checkout = () => {\n  _s();\n  const {\n    listaDelCarrito,\n    limpiarListadoDelCarrito,\n    precioTotal\n  } = useContext(CartContex);\n  const [ordenId, setOrdenId] = useState(null);\n  const [dataForm, setDataForm] = useState({\n    nombre: '',\n    telefono: '',\n    email: ''\n  });\n  const generarOrden = () => {\n    const orden = {};\n    orden.compra = dataForm;\n    orden.productos = listaDelCarrito.map(producto => ({\n      id: producto.id,\n      nombre: producto.nombre,\n      precio: producto.precio,\n      cantidad: producto.cantidad\n    }));\n    orden.total = precioTotal();\n    const dbFirestore = getFirestore();\n    const ordenCollecion = collection(dbFirestore, 'ordenes');\n    addDoc(ordenCollecion, orden).then(resp => {\n      setOrdenId(resp.id);\n    }).catch(err => console.log(err)).finally(() => {\n      setDataForm({\n        nombre: '',\n        telefono: '',\n        email: ''\n      });\n      setTimeout(() => {\n        limpiarListadoDelCarrito();\n      }, 2000);\n    });\n  };\n  const handleForm = evt => {\n    setDataForm({\n      ...dataForm,\n      [evt.target.name]: evt.target.value\n    });\n  };\n\n  // \n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n\n  //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n  ;\n};\n_s(Checkout, \"XSO3J3HQKumdBKD//vBYCN2BCnc=\");\n_c = Checkout;\nexport { Checkout };\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useContext","useState","CartContex","getFirestore","collection","getDoc","addDoc","Fragment","_Fragment","jsxDEV","_jsxDEV","Checkout","_s","listaDelCarrito","limpiarListadoDelCarrito","precioTotal","ordenId","setOrdenId","dataForm","setDataForm","nombre","telefono","email","generarOrden","orden","compra","productos","map","producto","id","precio","cantidad","total","dbFirestore","ordenCollecion","then","resp","catch","err","console","log","finally","setTimeout","handleForm","evt","target","name","value","_c","$RefreshReg$"],"sources":["/Users/indiradamico/Desktop/avances del proyecto final/src/components/Checkout/Checkout.jsx"],"sourcesContent":["import { useContext,useState } from \"react\";\n\nimport { CartContex } from \"../../contex/CartContex\";\n\nimport {\n    getFirestore,\n    collection, \n    getDoc,\n    addDoc\n  } from \"firebase/firestore\";\n  \n\nconst Checkout = () => {\n\n\n    const { listaDelCarrito, limpiarListadoDelCarrito, precioTotal } = useContext(CartContex)\n\n    const [ordenId, setOrdenId] = useState(null);\n    const [dataForm, setDataForm] = useState({ nombre: '', telefono: '', email: '' })\n\n    const generarOrden = () => {\n\n        const orden = {}\n        orden.compra = dataForm;\n        orden.productos = listaDelCarrito.map (producto=>({id:producto.id, nombre: producto.nombre, precio:producto.precio,cantidad:producto.cantidad }))\n        orden.total = precioTotal()\n\n        const dbFirestore = getFirestore()\n        const ordenCollecion = collection (dbFirestore, 'ordenes')\n       \n        \n        addDoc(ordenCollecion , orden)\n        .then(resp => { setOrdenId(resp.id)})\n        .catch( (err) => console.log(err) )\n        .finally( () => { \n            setDataForm( { nombre: '', telefono: '', email: ''} )  \n            setTimeout( () => { limpiarListadoDelCarrito() }, 2000)\n        }) \n\n    }\n\n    const handleForm = (evt) => {  \n\n        setDataForm({\n            ...dataForm,\n            [evt.target.name]: evt.target.value\n        })\n\n        \n\n    }\n\n// \n    return(\n\n        <>\n        \n       \n        </>\n        \n        \n      //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n    )\n\n\n\n};\n\nexport {Checkout}"],"mappings":";AAAA,SAASA,UAAU,EAACC,QAAQ,QAAQ,OAAO;AAE3C,SAASC,UAAU,QAAQ,yBAAyB;AAEpD,SACIC,YAAY,EACZC,UAAU,EACVC,MAAM,EACNC,MAAM,QACD,oBAAoB;AAAC,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAG9B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAGnB,MAAM;IAAEC,eAAe;IAAEC,wBAAwB;IAAEC;EAAY,CAAC,GAAGf,UAAU,CAACE,UAAU,CAAC;EAEzF,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC;IAAEmB,MAAM,EAAE,EAAE;IAAEC,QAAQ,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAG,CAAC,CAAC;EAEjF,MAAMC,YAAY,GAAGA,CAAA,KAAM;IAEvB,MAAMC,KAAK,GAAG,CAAC,CAAC;IAChBA,KAAK,CAACC,MAAM,GAAGP,QAAQ;IACvBM,KAAK,CAACE,SAAS,GAAGb,eAAe,CAACc,GAAG,CAAEC,QAAQ,KAAG;MAACC,EAAE,EAACD,QAAQ,CAACC,EAAE;MAAET,MAAM,EAAEQ,QAAQ,CAACR,MAAM;MAAEU,MAAM,EAACF,QAAQ,CAACE,MAAM;MAACC,QAAQ,EAACH,QAAQ,CAACG;IAAS,CAAC,CAAC,CAAC;IACjJP,KAAK,CAACQ,KAAK,GAAGjB,WAAW,CAAC,CAAC;IAE3B,MAAMkB,WAAW,GAAG9B,YAAY,CAAC,CAAC;IAClC,MAAM+B,cAAc,GAAG9B,UAAU,CAAE6B,WAAW,EAAE,SAAS,CAAC;IAG1D3B,MAAM,CAAC4B,cAAc,EAAGV,KAAK,CAAC,CAC7BW,IAAI,CAACC,IAAI,IAAI;MAAEnB,UAAU,CAACmB,IAAI,CAACP,EAAE,CAAC;IAAA,CAAC,CAAC,CACpCQ,KAAK,CAAGC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAE,CAAC,CAClCG,OAAO,CAAE,MAAM;MACZtB,WAAW,CAAE;QAAEC,MAAM,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAE,CAAE,CAAC;MACrDoB,UAAU,CAAE,MAAM;QAAE5B,wBAAwB,CAAC,CAAC;MAAC,CAAC,EAAE,IAAI,CAAC;IAC3D,CAAC,CAAC;EAEN,CAAC;EAED,MAAM6B,UAAU,GAAIC,GAAG,IAAK;IAExBzB,WAAW,CAAC;MACR,GAAGD,QAAQ;MACX,CAAC0B,GAAG,CAACC,MAAM,CAACC,IAAI,GAAGF,GAAG,CAACC,MAAM,CAACE;IAClC,CAAC,CAAC;EAIN,CAAC;;EAEL;EACI,oBAEIrC,OAAA,CAAAF,SAAA,mBAGE;;EAGJ;EAAA;AAKN,CAAC;AAACI,EAAA,CAtDID,QAAQ;AAAAqC,EAAA,GAARrC,QAAQ;AAwDd,SAAQA,QAAQ;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}