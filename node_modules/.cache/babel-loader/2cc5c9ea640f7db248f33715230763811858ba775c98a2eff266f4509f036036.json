{"ast":null,"code":"var _jsxFileName = \"/Users/indiradamico/Desktop/avances del proyecto final/src/components/Checkout/Checkout.jsx\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { FormsDeCompra } from \"../Formrs/FormsDeCompra\";\nimport { getFirestore, collection, getDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Checkout = () => {\n  _s();\n  const {\n    listaDelCarrito,\n    limpiarListadoDelCarrito,\n    precioTotal\n  } = useContext(CartContex);\n  const [ordenId, setOrdenId] = useState(null);\n  const [dataForm, setDataForm] = useState({\n    nombre: '',\n    telefono: '',\n    email: ''\n  });\n  const generarOrden = () => {\n    const orden = {};\n    orden.compra = dataForm;\n    orden.productos = listaDelCarrito.map(producto => ({\n      id: producto.id,\n      nombre: producto.nombre,\n      precio: producto.precio,\n      cantidad: producto.cantidad\n    }));\n    orden.total = precioTotal();\n    const dbFirestore = getFirestore();\n    const ordenCollecion = collection(dbFirestore, 'ordenes');\n    addDoc(ordenCollecion, orden).then(resp => {\n      setOrdenId(resp.id);\n    }).catch(err => console.log(err)).finally(() => {\n      setDataForm({\n        nombre: '',\n        telefono: '',\n        email: ''\n      });\n      setTimeout(() => {\n        limpiarListadoDelCarrito();\n      }, 2000);\n    });\n  };\n  const handleForm = evt => {\n    setDataForm({\n      ...dataForm,\n      [evt.target.name]: evt.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(FormsDeCompra, {\n      handleForm: handleForm,\n      generarOrdenDeCompra: generarOrden,\n      dataForm: dataForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)\n  }, void 0, false)\n\n  //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n  ;\n};\n_s(Checkout, \"XSO3J3HQKumdBKD//vBYCN2BCnc=\");\n_c = Checkout;\nexport { Checkout };\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useContext","useState","FormsDeCompra","getFirestore","collection","getDoc","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","listaDelCarrito","limpiarListadoDelCarrito","precioTotal","CartContex","ordenId","setOrdenId","dataForm","setDataForm","nombre","telefono","email","generarOrden","orden","compra","productos","map","producto","id","precio","cantidad","total","dbFirestore","ordenCollecion","addDoc","then","resp","catch","err","console","log","finally","setTimeout","handleForm","evt","target","name","value","children","generarOrdenDeCompra","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/indiradamico/Desktop/avances del proyecto final/src/components/Checkout/Checkout.jsx"],"sourcesContent":["import { useContext,useState } from \"react\";\n\nimport { FormsDeCompra } from \"../Formrs/FormsDeCompra\";\n\nimport {\n    getFirestore,\n    collection, \n    getDoc\n  } from \"firebase/firestore\";\n  \n\nconst Checkout = () => {\n\n\n    const { listaDelCarrito, limpiarListadoDelCarrito, precioTotal } = useContext(CartContex)\n\n    const [ordenId, setOrdenId] = useState(null);\n    const [dataForm, setDataForm] = useState({ nombre: '', telefono: '', email: '' })\n\n    const generarOrden = () => {\n\n        const orden = {}\n        orden.compra = dataForm;\n        orden.productos = listaDelCarrito.map (producto=>({id:producto.id, nombre: producto.nombre, precio:producto.precio,cantidad:producto.cantidad }))\n        orden.total = precioTotal()\n\n        const dbFirestore = getFirestore()\n        const ordenCollecion = collection (dbFirestore, 'ordenes')\n       \n        \n        addDoc(ordenCollecion , orden)\n        .then(resp => { setOrdenId(resp.id)})\n        .catch( (err) => console.log(err) )\n        .finally( () => { \n            setDataForm( { nombre: '', telefono: '', email: ''} )  \n            setTimeout( () => { limpiarListadoDelCarrito() }, 2000)\n        }) \n\n    }\n\n    const handleForm = (evt) => {  \n\n        setDataForm({\n            ...dataForm,\n            [evt.target.name]: evt.target.value\n        })\n\n        \n\n    }\n\n\n    return(\n\n        <>\n        \n        <FormsDeCompra handleForm={handleForm} generarOrdenDeCompra={generarOrden} dataForm={dataForm}/>\n        </>\n        \n        \n      //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n    )\n\n\n\n};\n\nexport {Checkout}"],"mappings":";;AAAA,SAASA,UAAU,EAACC,QAAQ,QAAQ,OAAO;AAE3C,SAASC,aAAa,QAAQ,yBAAyB;AAEvD,SACIC,YAAY,EACZC,UAAU,EACVC,MAAM,QACD,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAG9B,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAGnB,MAAM;IAAEC,eAAe;IAAEC,wBAAwB;IAAEC;EAAY,CAAC,GAAGd,UAAU,CAACe,UAAU,CAAC;EAEzF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC;IAAEmB,MAAM,EAAE,EAAE;IAAEC,QAAQ,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAG,CAAC,CAAC;EAEjF,MAAMC,YAAY,GAAGA,CAAA,KAAM;IAEvB,MAAMC,KAAK,GAAG,CAAC,CAAC;IAChBA,KAAK,CAACC,MAAM,GAAGP,QAAQ;IACvBM,KAAK,CAACE,SAAS,GAAGd,eAAe,CAACe,GAAG,CAAEC,QAAQ,KAAG;MAACC,EAAE,EAACD,QAAQ,CAACC,EAAE;MAAET,MAAM,EAAEQ,QAAQ,CAACR,MAAM;MAAEU,MAAM,EAACF,QAAQ,CAACE,MAAM;MAACC,QAAQ,EAACH,QAAQ,CAACG;IAAS,CAAC,CAAC,CAAC;IACjJP,KAAK,CAACQ,KAAK,GAAGlB,WAAW,CAAC,CAAC;IAE3B,MAAMmB,WAAW,GAAG9B,YAAY,CAAC,CAAC;IAClC,MAAM+B,cAAc,GAAG9B,UAAU,CAAE6B,WAAW,EAAE,SAAS,CAAC;IAG1DE,MAAM,CAACD,cAAc,EAAGV,KAAK,CAAC,CAC7BY,IAAI,CAACC,IAAI,IAAI;MAAEpB,UAAU,CAACoB,IAAI,CAACR,EAAE,CAAC;IAAA,CAAC,CAAC,CACpCS,KAAK,CAAGC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAE,CAAC,CAClCG,OAAO,CAAE,MAAM;MACZvB,WAAW,CAAE;QAAEC,MAAM,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAE,CAAE,CAAC;MACrDqB,UAAU,CAAE,MAAM;QAAE9B,wBAAwB,CAAC,CAAC;MAAC,CAAC,EAAE,IAAI,CAAC;IAC3D,CAAC,CAAC;EAEN,CAAC;EAED,MAAM+B,UAAU,GAAIC,GAAG,IAAK;IAExB1B,WAAW,CAAC;MACR,GAAGD,QAAQ;MACX,CAAC2B,GAAG,CAACC,MAAM,CAACC,IAAI,GAAGF,GAAG,CAACC,MAAM,CAACE;IAClC,CAAC,CAAC;EAIN,CAAC;EAGD,oBAEIzC,OAAA,CAAAE,SAAA;IAAAwC,QAAA,eAEA1C,OAAA,CAACL,aAAa;MAAC0C,UAAU,EAAEA,UAAW;MAACM,oBAAoB,EAAE3B,YAAa;MAACL,QAAQ,EAAEA;IAAS;MAAAiC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC,gBAC9F;;EAGJ;EAAA;AAKN,CAAC;AAAC3C,EAAA,CAtDID,QAAQ;AAAA6C,EAAA,GAAR7C,QAAQ;AAwDd,SAAQA,QAAQ;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}