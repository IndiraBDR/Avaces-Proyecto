{"ast":null,"code":"var _jsxFileName = \"/Users/indiradamico/Desktop/avances del proyecto final/src/components/Checkout/Checkout.jsx\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CartContex } from \"../../contex/CartContex\";\nimport { FormDeCompra } from \"../Formrs/FormDeCompra\";\nimport { getFirestore, collection, getDoc, addDoc } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Checkout = () => {\n  _s();\n  const {\n    listaDelCarrito,\n    limpiarListadoDelCarrito,\n    precioTotal\n  } = useContext(CartContex);\n  const [ordenId, setOrdenId] = useState(null);\n  const [dataForm, setDataForm] = useState({\n    nombre: '',\n    telefono: '',\n    email: ''\n  });\n  const generarOrden = () => {\n    const orden = {};\n    orden.compra = dataForm;\n    orden.productos = listaDelCarrito.map(producto => ({\n      id: producto.id,\n      nombre: producto.nombre,\n      precio: producto.precio,\n      cantidad: producto.cantidad\n    }));\n    orden.total = precioTotal();\n    const dbFirestore = getFirestore();\n    const ordenCollecion = collection(dbFirestore, 'ordenes');\n    addDoc(ordenCollecion, orden).then(resp => {\n      setOrdenId(resp.id);\n    }).catch(err => console.log(err)).finally(() => {\n      setDataForm({\n        nombre: '',\n        telefono: '',\n        email: ''\n      });\n      setTimeout(() => {\n        limpiarListadoDelCarrito();\n      }, 2000);\n    });\n  };\n  const handleForm = evt => {\n    console.log(evt.target.value);\n    setDataForm({\n      ...dataForm,\n      [evt.target.name]: evt.target.value\n    });\n  };\n\n  // \n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: ordenId ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center m-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Orden ID: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: ordenId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Gracias por su compra!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"btn btn-info fw-semibold text-dark my-5\",\n        to: \"/\",\n        children: \"Volver al Inicio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 12\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column text-center mx-5 px-5 gap-2 w-75\",\n      children: /*#__PURE__*/_jsxDEV(FormDeCompra, {\n        handleForm: handleForm,\n        generarOrdenDeCompra: generarOrden,\n        dataForm: dataForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this)\n  }, void 0, false)\n\n  //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n  ;\n};\n_s(Checkout, \"XSO3J3HQKumdBKD//vBYCN2BCnc=\");\n_c = Checkout;\nexport { Checkout };\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useContext","useState","Link","CartContex","FormDeCompra","getFirestore","collection","getDoc","addDoc","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","listaDelCarrito","limpiarListadoDelCarrito","precioTotal","ordenId","setOrdenId","dataForm","setDataForm","nombre","telefono","email","generarOrden","orden","compra","productos","map","producto","id","precio","cantidad","total","dbFirestore","ordenCollecion","then","resp","catch","err","console","log","finally","setTimeout","handleForm","evt","target","value","name","children","className","fileName","_jsxFileName","lineNumber","columnNumber","to","generarOrdenDeCompra","_c","$RefreshReg$"],"sources":["/Users/indiradamico/Desktop/avances del proyecto final/src/components/Checkout/Checkout.jsx"],"sourcesContent":["import { useContext,useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { CartContex } from \"../../contex/CartContex\";\nimport{FormDeCompra } from \"../Formrs/FormDeCompra\"\n\nimport {\n    getFirestore,\n    collection, \n    getDoc,\n    addDoc\n  } from \"firebase/firestore\";\n  \n\nconst Checkout = () => {\n\n\n    const { listaDelCarrito, limpiarListadoDelCarrito, precioTotal } = useContext(CartContex)\n\n    const [ordenId, setOrdenId] = useState(null);\n    const [dataForm, setDataForm] = useState({ nombre: '', telefono: '', email: '' })\n\n    const generarOrden = () => {\n\n        const orden = {}\n        orden.compra = dataForm;\n        orden.productos = listaDelCarrito.map (producto=>({id:producto.id, nombre: producto.nombre, precio:producto.precio,cantidad:producto.cantidad }))\n        orden.total = precioTotal()\n\n        const dbFirestore = getFirestore()\n        const ordenCollecion = collection (dbFirestore, 'ordenes')\n       \n        \n        addDoc(ordenCollecion , orden)\n        .then(resp => { setOrdenId(resp.id)})\n        .catch( (err) => console.log(err) )\n        .finally( () => { \n            setDataForm( { nombre: '', telefono: '', email: ''} )  \n            setTimeout( () => { limpiarListadoDelCarrito() }, 2000)\n        }) \n\n    }\n\n    const handleForm = (evt) => {  \n\n        console.log(evt.target.value);\n        \n\n        setDataForm({\n\n          \n            ...dataForm,\n            [evt.target.name]: evt.target.value\n            \n            \n        })\n\n       \n        \n\n    }\n\n// \n    return(\n\n\n        \n        <>\n\n{\n        ordenId \n        ? (<div className='text-center m-5'>\n                <h1 >Orden ID: </h1>\n                <p>{ ordenId}</p>\n                <p>Gracias por su compra!!</p>\n                <Link className='btn btn-info fw-semibold text-dark my-5' to='/'>Volver al Inicio</Link>\n          </div>)\n        : (<div className='d-flex flex-column text-center mx-5 px-5 gap-2 w-75'>\n\n         <FormDeCompra handleForm={handleForm} generarOrdenDeCompra={generarOrden} dataForm={dataForm}/>\n            \n          </div>)\n     }\n\n       \n       \n        </>\n        \n        \n      //  <CheckoutValidacion generateOrder={generateOrder} handleForm={handleForm} dataForm={dataForm} />\n    )\n\n\n\n};\n\nexport {Checkout}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}